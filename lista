#include <stdio.h>
#include <stdlib.h>

struct Contato
{
    char nome[50];
    int numero;
};

struct Contato add[1000];

void addcontato();
void listacontato();
void editarcontato();
int main()
{
    int opcao;
    int numContatos = 0;
    printf("......Lista de contatos......\n");

    do
    {
        printf("1 - Adicionar contatos\n");
        printf("2 - Lista de contatos\n");
        printf("3 - Editar contatos\n");
        printf("4 - Fechar programa\n");
        scanf("%d", &opcao);

        switch (opcao)
        {
        case 1:
            if (numContatos < 1000)
            {
                addcontato();
                numContatos++;
            }
            else
            {
                printf("Lista de contatos está cheia.\n");
            }
            break;
        case 2:
            listacontato();
            break;
        case 3:
            editarcontato();
        }

    } while (opcao != 4);

    system("cls");
    printf("\nLista fechada\n");

    return 0;
}

void addcontato()
{
    system("cls");
    int i;
    char cancelar;
    for (i = 0; i < 1000; i++)
    {
        if (add[i].numero == 0)
        {
            printf("........ADICIONAR CONTATO........\n");
            printf("\nNome: ");
            fflush(stdin);
            gets(add[i].nome);
            printf("\nNumero: ");
            scanf("%d", &add[i].numero);
            printf("Deseja adicionar outro contato? (s/n): ");
            scanf(" %c", &cancelar);
            if (cancelar != 's')
            {
                break;
            }
        }
    }
}

void listacontato()
{
    system("cls");
    int i;
    for (i = 0; i < 1000; i++)
    {
        if (add[i].numero != 0)
        {
            printf("......lista de contatos......\n");
            printf("Nome: %s\n", add[i].nome);
            printf("Numero: %d\n", add[i].numero);
        }
    }
}

void editarcontato()
{
    char nome_editar[50];
    int encontrado = 0;

    system("cls");
    printf("Digite o nome do contato a ser editado: ");
    scanf("%s", nome_editar);

    for (int i = 0; i < 1000; i++)
    {
        if (strcmp(add[i].nome, nome_editar) == 0)
        {
            encontrado = 1;
            printf("Contato encontrado:\n");
            printf("Nome: %s\n", add[i].nome);
            printf("Numero: %d\n", add[i].numero);

            char opcao[50];
            printf("O que você deseja editar (nome, numero)? ");
            scanf("%s", opcao);

            if (strcmp(opcao, "nome") == 0)
            {
                printf("Dentro if nome\n");
                printf("Digite o novo nome: ");
                scanf("%s", add[i].nome);
            }
            else if (strcmp(opcao, "numero") == 0)
            {
                printf("Digite o novo numero: ");
                scanf("%d", &add[i].numero);
            }
            else
            {
                printf("Opção inválida.\n");
            }
        }
    }

    if (!encontrado)
    {
        printf("Contato não encontrado.\n");
    }
}
